# 在Tendermint中如何确定出块人

本文将解释出块人选择流程。因为Tendermint是一个“leader-based 协议”，所以选择出块人的流程至关重要。我们将`proposer_p(h,r)` 记作在高度为h的第r轮的出块人选择流程。应该满足以下特性：

`认同`：在一组验证人中，如果有两个诚实的验证人p和q，那么在任意高度h，他们所得到的出块人相同，即：proposer_p(h,r) = proposer_q(h,r)

`可用`：在每k轮的投票中（k为系统参数），至少有一轮可以选出诚实的出块人。
`公平`：验证人被选择作为出块人的概率和其投票所占比例成正比。也就是说，抵押越多的验证人被选上的概率越大。

下面就针对一些例子进行分析：如果目前有4个验证人，在第r轮，他们的权重分别为(p0,4), (p1, 2), (p2, 2), (p3, 2)。 我们可以依据一下数列来选取出块人：`p0, p1, p2, p3, p0, p0, p1, p2, p3, p0, p0, p1, p2, p3, p0, p0, p1, p2, p3, p0, etc`

如果有以下权重分配：(p0,3), (p1, 1), (p2, 1), (p3, 1), (p4, 1), (p5, 1), (p6, 1), (p7, 1)，那么我们可以依据一下数列来选取出块人：
`p0, p1, p2, p3, p4, p5, p6, p7, p8, p9, p0, p1, p2, p3, p4, p5, p6, p7, p8, p9, etc`
假设p0作恶，那么我们可以认为在这个过程中，系统的权重分配比较平均。

若有多个人作恶，那么可能就会存在一轮中的每一个出块人都是不诚实的。这就会带来很大的问题。

`p0, p1, p2, p3, p4, p5, p6, p7, p8, p9, p0, p1, p2, p3, p4, p5, p6, p7, p8, p9, etc`

如果有以下权重分配: (p0,100), (p1, 2), (p2, 3), (p3, 4)。这意味着出块人的选择方式可以是：

`p0, p0, p0, p0, p0, p0, p0, p0, p0, p0, p0, p0, p0, p1, p0, p0, p0, p0, p0, etc`

这意味着几乎每一轮都是同一个出块人P0。也就是说如果p0作恶，这个出块人可以为所欲为。